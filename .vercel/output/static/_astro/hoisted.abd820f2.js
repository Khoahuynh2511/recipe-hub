import{i as c,r as u,a as g,b as m}from"./hoisted.d1eadcf0.js";import{e as h}from"./api.51f19d40.js";const o=document.getElementById("save-recipe"),r=document.getElementById("add-to-shopping");async function d(){if(!o)return;const e=o.getAttribute("data-id"),t=o.getAttribute("data-type");if(!e||!t)return;await c(e,t)?(o.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="currentColor" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
        </svg>
        Saved
      `,o.classList.remove("btn-primary"),o.classList.add("btn-outline")):(o.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
        </svg>
        Save Recipe
      `,o.classList.add("btn-primary"),o.classList.remove("btn-outline"))}async function w(){const e=o?.getAttribute("data-id"),t=o?.getAttribute("data-type");if(!e||!t)return;if(await c(e,t))await u(e,t);else{let a;try{t==="meal"?a=(await(await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${e}`)).json()).meals?.[0]:a=(await(await fetch(`https://www.thecocktaildb.com/api/json/v1/1/lookup.php?i=${e}`)).json()).drinks?.[0],a&&await g({id:e,type:t,data:a})}catch(n){console.error("Error saving recipe:",n)}}d(),document.dispatchEvent(new CustomEvent("cookbook-updated"))}async function v(){const e=r?.getAttribute("data-id"),t=r?.getAttribute("data-type"),i=r?.getAttribute("data-title")||"";if(!(!e||!t))try{let a;if(t==="meal"?a=(await(await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${e}`)).json()).meals?.[0]:a=(await(await fetch(`https://www.thecocktaildb.com/api/json/v1/1/lookup.php?i=${e}`)).json()).drinks?.[0],a){const n=h(a);for(const{ingredient:s,measure:p}of n){const l=f(s);await m({id:Date.now()+Math.random().toString(36).substring(2,10),name:s,quantity:p,checked:!1,category:l,recipe:i})}alert(`Added ${n.length} ingredients to shopping list!`),document.dispatchEvent(new CustomEvent("shopping-list-updated"))}}catch(a){console.error("Error adding ingredients:",a)}}function f(e){const t=e.toLowerCase();return/chicken|beef|pork|lamb|steak|fish|salmon|shrimp|meat|bacon|sausage|turkey/i.test(t)?"meat":/apple|banana|orange|lemon|lime|onion|garlic|potato|tomato|carrot|pepper|lettuce|spinach|cucumber|celery|fruit|vegetable|herb|leaves/i.test(t)?"produce":/milk|cheese|cream|butter|yogurt|egg|yoghurt|dairy/i.test(t)?"dairy":/bread|flour|cake|biscuit|cookie|muffin|pastry|dough|bun|bakery/i.test(t)?"bakery":/rice|pasta|noodle|cereal|bean|lentil|sugar|salt|spice|oil|vinegar|sauce|syrup|honey|seasoning|powder/i.test(t)?"dry goods":"other"}o?.addEventListener("click",w);r?.addEventListener("click",v);document.addEventListener("DOMContentLoaded",d);
