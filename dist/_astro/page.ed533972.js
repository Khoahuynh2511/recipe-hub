function C(e){e=e||1;var t=[],n=0;function r(a){t.push(a)>1||i()}function o(){n--,i()}function i(){n<e&&t.length>0&&(t.shift()(),n++)}return[r,o]}function I(e,t){const n=t?.timeout??50,r=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,n-(Date.now()-r))}})},1)}const P=window.requestIdleCallback||I;var D=P;const m=["mouseenter","touchstart","focus"],E=new Set,g=new Set;function w({href:e}){try{const t=new URL(e);return window.location.origin===t.origin&&window.location.pathname!==t.pathname&&!E.has(e)}catch{}return!1}let y,s;function q(e){E.add(e.href),s.observe(e),m.map(t=>e.addEventListener(t,v,{passive:!0,once:!0}))}function H(e){s.unobserve(e),m.map(t=>e.removeEventListener(t,v))}function v({target:e}){e instanceof HTMLAnchorElement&&L(e)}async function L(e){H(e);const{href:t}=e;try{const n=await fetch(t).then(i=>i.text());y||=new DOMParser;const r=y.parseFromString(n,"text/html"),o=Array.from(r.querySelectorAll('link[rel="stylesheet"]'));await Promise.all(o.filter(i=>!g.has(i.href)).map(i=>(g.add(i.href),fetch(i.href))))}catch{}}function M({selector:e='a[href][rel~="prefetch"]',throttle:t=1,intentSelector:n='a[href][rel~="prefetch-intent"]'}){if(!navigator.onLine)return Promise.reject(new Error("Cannot prefetch, no network connection"));if("connection"in navigator){const i=navigator.connection;if(i.saveData)return Promise.reject(new Error("Cannot prefetch, Save-Data is enabled"));if(/(2|3)g/.test(i.effectiveType))return Promise.reject(new Error("Cannot prefetch, network conditions are poor"))}const[r,o]=C(t);s=s||new IntersectionObserver(i=>{i.forEach(a=>{if(a.isIntersecting&&a.target instanceof HTMLAnchorElement){const l=a.target.getAttribute("rel")||"";let c=!1;Array.isArray(n)?c=n.some(d=>l.includes(d)):c=l.includes(n),c||r(()=>L(a.target).finally(o))}})}),D(()=>{[...document.querySelectorAll(e)].filter(w).forEach(q);const a=Array.isArray(n)?n.join(","):n;[...document.querySelectorAll(a)].filter(w).forEach(c=>{m.map(d=>c.addEventListener(d,v,{passive:!0,once:!0}))})})}const A=new Set,f=new WeakSet;let h,S="hover",b=!1;function j(e){b||(b=!0,h??=e?.prefetchAll??!1,S??=e?.defaultStrategy??"hover",O(),U(),V())}function O(){for(const e of["touchstart","mousedown"])document.body.addEventListener(e,t=>{u(t.target,"tap")&&p(t.target.href,{with:"fetch",ignoreSlowConnection:!0})},{passive:!0})}function U(){let e;document.body.addEventListener("focusin",r=>{u(r.target,"hover")&&t(r)},{passive:!0}),document.body.addEventListener("focusout",n,{passive:!0}),k(()=>{for(const r of document.getElementsByTagName("a"))f.has(r)||u(r,"hover")&&(f.add(r),r.addEventListener("mouseenter",t,{passive:!0}),r.addEventListener("mouseleave",n,{passive:!0}))});function t(r){const o=r.target.href;e&&clearTimeout(e),e=setTimeout(()=>{p(o,{with:"fetch"})},80)}function n(){e&&(clearTimeout(e),e=0)}}function V(){let e;k(()=>{for(const t of document.getElementsByTagName("a"))f.has(t)||u(t,"viewport")&&(f.add(t),e??=x(),e.observe(t))})}function x(){const e=new WeakMap;return new IntersectionObserver((t,n)=>{for(const r of t){const o=r.target,i=e.get(o);r.isIntersecting?(i&&clearTimeout(i),e.set(o,setTimeout(()=>{n.unobserve(o),e.delete(o),p(o.href,{with:"link"})},300))):i&&(clearTimeout(i),e.delete(o))}})}function p(e,t){const n=t?.ignoreSlowConnection??!1;if(!F(e,n))return;if(A.add(e),(t?.with??"link")==="link"){const o=document.createElement("link");o.rel="prefetch",o.setAttribute("href",e),document.head.append(o)}else fetch(e).catch(o=>{console.log(`[astro] Failed to prefetch ${e}`),console.error(o)})}function F(e,t){if(!navigator.onLine||!t&&T())return!1;try{const n=new URL(e,location.href);return location.origin===n.origin&&(location.pathname!==n.pathname||location.search!==n.search)&&!A.has(e)}catch{}return!1}function u(e,t){if(e?.tagName!=="A")return!1;const n=e.dataset.astroPrefetch;return n==="false"?!1:t==="tap"&&(n!=null||h)&&T()?!0:n==null&&h||n===""?t===S:n===t}function T(){if("connection"in navigator){const e=navigator.connection;return e.saveData||/(2|3)g/.test(e.effectiveType)}return!1}function k(e){e();let t=!1;document.addEventListener("astro:page-load",()=>{if(!t){t=!0;return}e()})}M({});j();
